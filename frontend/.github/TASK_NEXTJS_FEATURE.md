# TÂCHE CODEX – DÉVELOPPEMENT DE FONCTIONNALITÉ NEXT.JS

## CONTEXTE
CETTE TÂCHE S’APPLIQUE À UN PROJET **NEXT.JS 16.X** UTILISANT PRIORITAIREMENT :
- APP ROUTER
- REACT SERVER COMPONENTS
- SERVER ACTIONS
- TYPESCRIPT STRICT

LE CONTEXTE NEXT.JS FOURNI FAIT FOI.  
EN CAS DE CONTRADICTION, **DEMANDER CLARIFICATION AVANT D’AGIR**.

---

## OBJECTIF
IMPLÉMENTER UNE FONCTIONNALITÉ COMPLÈTE, PRÊTE POUR LA PRODUCTION, EN RESPECTANT L’ARCHITECTURE ET LES CONVENTIONS DU PROJET.

---

## PÉRIMÈTRE TECHNIQUE OBLIGATOIRE

### ROUTING
- UTILISER L’**APP ROUTER**
- CRÉER LES ROUTES VIA LE SYSTÈME DE FICHIERS
- NE PAS UTILISER LE PAGES ROUTER SAUF INSTRUCTION EXPLICITE

### COMPOSANTS
- SERVER COMPONENTS PAR DÉFAUT
- `"USE CLIENT"` UNIQUEMENT SI INTERACTION UI NÉCESSAIRE
- SÉPARER LOGIQUE SERVEUR ET UI

### DONNÉES
- UTILISER `FETCH` AVEC STRATÉGIE DE CACHE EXPLICITE
- TAGUER SYSTÉMATIQUEMENT LES DONNÉES
- REVALIDATION CIBLÉE APRÈS MUTATION

### MUTATIONS
- UTILISER DES **SERVER ACTIONS**
- VALIDATION STRICTE DES ENTRÉES (ZOD RECOMMANDÉ)
- APPELER `REVALIDATEPATH`, `REVALIDATETAG`, `UPDATETAG` OU `REFRESH` APRÈS ÉCRITURE

---

## RÈGLES STRICTES (NON NÉGOCIABLES)

- ❌ NE PAS CRÉER D’API ROUTE SI UNE SERVER ACTION SUFFIT
- ❌ NE PAS INTRODUIRE DE DÉPENDANCE EXTERNE SANS DEMANDE
- ❌ NE PAS MODIFIER UNE API EXISTANTE SANS INSTRUCTION
- ❌ NE PAS CHANGER LE COMPORTEMENT FONCTIONNEL EXISTANT

---

## ÉTAPES D’EXÉCUTION ATTENDUES

1. **ANALYSE**
   - IDENTIFIER LES FICHIERS IMPACTÉS
   - DÉTERMINER SERVER VS CLIENT COMPONENTS
   - IDENTIFIER LES DONNÉES À CHARGER / MUTER

2. **ARCHITECTURE**
   - DÉCRIRE BRIÈVEMENT LA STRUCTURE RETENUE
   - JUSTIFIER L’USAGE DE CLIENT COMPONENTS SI PRÉSENTS

3. **IMPLÉMENTATION**
   - ÉCRIRE LE CODE TYPESCRIPT COMPLET
   - RESPECTER LES CONVENTIONS DU PROJET
   - SÉPARER UI / LOGIQUE

4. **CACHE & REVALIDATION**
   - DÉFINIR EXPLICITEMENT LA STRATÉGIE
   - APPLIQUER DES TAGS COHÉRENTS
   - REVALIDER UNIQUEMENT CE QUI EST NÉCESSAIRE

5. **QUALITÉ**
   - CODE LISIBLE
   - FONCTIONS COURTES
   - AUCUNE DUPLICATION INUTILE

---

## SORTIE ATTENDUE

### SI CRÉATION DE FICHIERS
- FOURNIR **CHAQUE FICHIER COMPLET**
- INDIQUER CLAIREMENT LE CHEMIN (`APP/...`)

### SI MODIFICATION
- MONTRER UNIQUEMENT LES PARTIES MODIFIÉES
- NE RIEN ALTÉRER HORS PÉRIMÈTRE

### TEXTE
- EXPLICATIONS COURTES
- PAS DE PÉDAGOGIE INUTILE
- PAS DE JUSTIFICATION ÉVIDENTE

---

## CRITÈRES DE SUCCÈS

- FONCTIONNALITÉ OPÉRATIONNELLE
- COMPATIBLE NEXT.JS 16.X
- CONFORME AUX CONVENTIONS APP ROUTER
- CACHE MAÎTRISÉ
- FACILEMENT MAINTENABLE

---

## EN CAS D’AMBIGUÏTÉ
**STOP.**
POSER UNE QUESTION CLAIRE AVANT TOUTE IMPLÉMENTATION.
