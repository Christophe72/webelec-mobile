# TÂCHE CODEX – CORRECTIFS CACHE & PERFORMANCE NEXT.JS

## CONTEXTE
CETTE TÂCHE S’APPLIQUE À UN PROJET **NEXT.JS 16.X** APRÈS UN **AUDIT CACHE & PERFORMANCE EXISTANT**.

LES PROBLÈMES À CORRIGER DOIVENT ÊTRE :
- EXPLICITEMENT LISTÉS
- PRIORISÉS
- VALIDÉS

SANS AUDIT OU LISTE FOURNIE, **NE RIEN MODIFIER**.

---

## OBJECTIF
APPLIQUER DES **CORRECTIFS CIBLÉS** POUR AMÉLIORER :
- PERFORMANCE SERVEUR
- PERFORMANCE CLIENT
- EFFICACITÉ DU CACHE
- COÛT DE RENDU

**SANS MODIFIER LE COMPORTEMENT FONCTIONNEL OBSERVABLE.**

---

## PRÉ-REQUIS OBLIGATOIRES

AVANT TOUTE MODIFICATION, DISPOSER DE :
- LA LISTE DES PROBLÈMES À CORRIGER
- LEUR LOCALISATION (FICHIERS CONCERNÉS)
- LES RECOMMANDATIONS ASSOCIÉES

SI UNE INFORMATION MANQUE → **STOP ET DEMANDER CLARIFICATION**.

---

## PÉRIMÈTRE DES CORRECTIFS AUTORISÉS

### 1. CACHE DE DONNÉES
- AJOUTER OU CORRIGER :
  - `CACHELIFE()`
  - `CACHETAG()`
  - `REVALIDATETAG()`
  - `REVALIDATEPATH()` CIBLÉ
- SUPPRIMER :
  - `NO-STORE` ABUSIF
  - `REFRESH()` INUTILE

### 2. DATA FETCHING
- DÉDUPLIQUER LES FETCH IDENTIQUES
- CENTRALISER LES APPELS REDONDANTS
- CORRIGER LES STRATÉGIES `FORCE-CACHE` / `REVALIDATE`

### 3. SERVER ACTIONS
- RÉDUIRE LA PORTÉE DE REVALIDATION
- REMPLACER REVALIDATION GLOBALE PAR TAGS
- NETTOYER LES APPELS DE REFRESH SUPERFLUS

### 4. RENDU & COMPOSANTS
- SUPPRIMER `"USE CLIENT"` INUTILE
- TRANSFORMER DES COMPOSANTS EN SERVER COMPONENTS
- AJOUTER DES DYNAMIC IMPORTS LÀ OÙ JUSTIFIÉ

### 5. FRONTEND & ASSETS
- CORRIGER L’USAGE DE `NEXT/IMAGE`
- AJUSTER PRELOAD / LAZY LOADING
- SUPPRIMER LES IMPORTS CLIENT INUTILES

---

## INTERDICTIONS ABSOLUES

- ❌ MODIFIER LA LOGIQUE MÉTIER
- ❌ AJOUTER UNE FONCTIONNALITÉ
- ❌ MODIFIER L’UX VOLONTAIREMENT
- ❌ AJOUTER UNE DÉPENDANCE EXTERNE
- ❌ REFACTOR GLOBAL NON DEMANDÉ

---

## MÉTHODE D’EXÉCUTION

1. **VALIDATION**
   - RELIRE CHAQUE PROBLÈME LISTÉ
   - CONFIRMER QU’IL EST RÉEL ET CORRIGIBLE

2. **CORRECTION CIBLÉE**
   - UNE CORRECTION À LA FOIS
   - PÉRIMÈTRE MINIMAL
   - AUCUN EFFET DE BORD

3. **VÉRIFICATION**
   - FONCTIONNALITÉS INCHANGÉES
   - ROUTES INTACTES
   - DONNÉES IDENTIQUES

4. **JUSTIFICATION**
   - EXPLIQUER BRIÈVEMENT CHAQUE CORRECTIF
   - LIER AU PROBLÈME INITIAL

---

## SORTIE ATTENDUE

### CODE
- FOURNIR UNIQUEMENT LES FICHIERS MODIFIÉS
- FICHIERS COMPLETS SI PETITS
- DIFFS CIBLÉS SINON
- CHEMINS CLAIREMENT INDIQUÉS

### TEXTE
POUR CHAQUE CORRECTIF :
- PROBLÈME CORRIGÉ
- SOLUTION APPLIQUÉE
- BÉNÉFICE ATTENDU (PERF / CACHE)

---

## CRITÈRES DE RÉUSSITE

- GAINS RÉELS DE PERFORMANCE
- CACHE PLUS STABLE ET PRÉVISIBLE
- MOINS DE RENDU INUTILE
- AUCUN CHANGEMENT FONCTIONNEL

---

## EN CAS DE DOUTE
**STOP.**
NE RIEN MODIFIER SANS VALIDATION EXPLICITE.
